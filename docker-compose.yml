version: '3'

services:
  node:
    build:
      context: ./
      dockerfile: docker/node/Dockerfile
    volumes:
      - ./:/code
    working_dir: /code
    command: npm run dev
    environment:
      NEXT_TELEMETRY_DISABLED: 1
    networks:
      - internal
      - proxy
    labels:
      - traefik.frontend.rule=Host:web.aboutbits.local
      - traefik.docker.network=proxy
      - traefik.port=3000
      - traefik.backend=next-boilerplate-web

networks:
  proxy:
    external: true
  internal:
    external: false
